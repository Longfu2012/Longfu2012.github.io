<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Unity游戏音频资源提取-acb格式</title>
    <url>/2021/04/01/Unity%E6%B8%B8%E6%88%8F%E9%9F%B3%E9%A2%91%E8%B5%84%E6%BA%90%E6%8F%90%E5%8F%96-acb%E6%A0%BC%E5%BC%8F/</url>
    <content><![CDATA[<h4 id="游戏音频文件"><a href="#游戏音频文件" class="headerlink" title="游戏音频文件"></a>游戏音频文件</h4><p>在一个Unity游戏中，发现音频文件在平时的放置位置没有找打，因为有需要参考与借鉴思路的需求，所以希望提取音频文件。在游戏包找了一圈后，发现后缀acb的文件大小和命名比较可以，所以先弄开看看，位置放在assets下面的任意可能一个文件夹里面，如下类似：</p>
<p><img src="/2021/04/01/Unity%E6%B8%B8%E6%88%8F%E9%9F%B3%E9%A2%91%E8%B5%84%E6%BA%90%E6%8F%90%E5%8F%96-acb%E6%A0%BC%E5%BC%8F/1.png" alt="演示1"></p>
<h4 id="abc解压缩"><a href="#abc解压缩" class="headerlink" title="abc解压缩"></a>abc解压缩</h4><p>1.下载VGMToolbox工具对acb格式文件转成多个hca文件，下载地址如下：<br><a class="link" href="https://sourceforge.net/projects/vgmtoolbox/">VGMToolbox<i class="fas fa-external-link-alt"></i></a></p>
<p>2.由于是免安装了，所有下载后解压可以看到这exe，直接双击启动<br><img src="/2021/04/01/Unity%E6%B8%B8%E6%88%8F%E9%9F%B3%E9%A2%91%E8%B5%84%E6%BA%90%E6%8F%90%E5%8F%96-acb%E6%A0%BC%E5%BC%8F/2.png" alt="演示2"></p>
<p>3.切换到对应的选项，然后把你需要转换的acb文件拖到这里<br><img src="/2021/04/01/Unity%E6%B8%B8%E6%88%8F%E9%9F%B3%E9%A2%91%E8%B5%84%E6%BA%90%E6%8F%90%E5%8F%96-acb%E6%A0%BC%E5%BC%8F/3.png" alt="演示3"></p>
<h4 id="hca文件转化"><a href="#hca文件转化" class="headerlink" title="hca文件转化"></a>hca文件转化</h4><p>4.此时与acb格式文件同一个文件夹下面会生成一个文件夹，如图所示。（我拖动的是SFX.acb文件）<br><img src="/2021/04/01/Unity%E6%B8%B8%E6%88%8F%E9%9F%B3%E9%A2%91%E8%B5%84%E6%BA%90%E6%8F%90%E5%8F%96-acb%E6%A0%BC%E5%BC%8F/4.png" alt="演示4"></p>
<p>5.下载hca.exe,然后解压放在hca文件相同文件夹内，对其进行hca格式转成wav格式的音频文件<br><a href="Unity%E6%B8%B8%E6%88%8F%E9%9F%B3%E9%A2%91%E8%B5%84%E6%BA%90%E6%8F%90%E5%8F%96-acb%E6%A0%BC%E5%BC%8F/decode+hca.zip">hca及其批处理文件</a></p>
<p><img src="/2021/04/01/Unity%E6%B8%B8%E6%88%8F%E9%9F%B3%E9%A2%91%E8%B5%84%E6%BA%90%E6%8F%90%E5%8F%96-acb%E6%A0%BC%E5%BC%8F/5.png" alt="演示5"></p>
<p><img src="/2021/04/01/Unity%E6%B8%B8%E6%88%8F%E9%9F%B3%E9%A2%91%E8%B5%84%E6%BA%90%E6%8F%90%E5%8F%96-acb%E6%A0%BC%E5%BC%8F/6.png" alt="演示6"></p>
]]></content>
      <categories>
        <category>Unity</category>
      </categories>
      <tags>
        <tag>Unity</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo-asset-image生成本地图片链接错误</title>
    <url>/2020/12/09/hexo-asset-image%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF/</url>
    <content><![CDATA[<h3 id="文章图片存放选型"><a href="#文章图片存放选型" class="headerlink" title="文章图片存放选型"></a>文章图片存放选型</h3><p>在安装好Hexo和把主题设置完成后，想在自己的文字里面添加一点图文说明，这样可以更好的表达文字旨意。那么如何让hexo生成的静态网页里面插入图片呢？<br>其实就是遵循markdown的语法可以有三种方式把图片插入到文章中:</p>
<ol>
<li> <strong>本地图片</strong><br>本地图片的插入，其实说白了，就是图片和我们生成的网页在同一个服务器下面（也就是说网页可以通过相对路径可以访问到图片）</li>
<li> <strong>网络图片</strong><br>网络插入的方式，你可以直接引用网络找到的图片（也就是一条网络链接，直接可以访问到图片），也可以自己绘制的图片通过图床的方式（也是生成一条可以访问的图片来访问这个图片）</li>
<li><strong>存到markdown文件中</strong><br>这种方式是紧紧的把图片和网页联系在一起，这个方式的好处就是不用担心链接失效的问题。</li>
</ol>
<p>这三种方式，经过我的一些考虑后，最后决定使用本地图片的方式来对文章的引用图片。下面给出我选择本地图片存储的理由和各种方式引用图片的步骤。</p>
<h4 id="为什么选择本地图片方式"><a href="#为什么选择本地图片方式" class="headerlink" title="为什么选择本地图片方式"></a>为什么选择本地图片方式</h4><p>主要还是因为节约成本和文章资源比较好整理，还有我怕麻烦，当我们看到一些比较旧的文章的时候，是不是有遇到过图片加载失败，有些说明没有图片的辅助让人很难理解作者想要表达的意思？对的，我就是想规避这类的问题，希望当我的服务器停止的时候，文章和图片共存亡，哈哈哈哈…..减少让人看了摸不着头脑的文章，提高文章的体验度。</p>
<h4 id="如何插入本地图片"><a href="#如何插入本地图片" class="headerlink" title="如何插入本地图片"></a>如何插入本地图片</h4><p>这个是这篇文章说的重点，也演示在这个过程中遇到的一些坑，和填坑的过程。</p>
<ul>
<li> <strong>安装hexo-asset-image插件</strong><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">npm install https://github.com/CodeFalling/hexo-asset-image -- save</span><br></pre></td></tr></table></figure></li>
<li> <strong>配置 _config.yml</strong><br>在hexo初始化目录下找到 <code>_config.yml</code> 文件(注意是根目录的，不是在themes目录下)，打开并修改属性 <code>post_asset_folder: true</code> </li>
<li><strong>新建一篇文章</strong><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">hexo n &quot;测试文章&quot;</span><br></pre></td></tr></table></figure>
执行上述命令后，你的 <code>xxx\source\_posts\</code> 文件夹下就生成了如下一个 <code>md</code> 文件和同名的文件夹<br><img src="/2020/12/09/hexo-asset-image%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF/2.png" alt="演示2"><br>这样你就可以通过把图片放在这个文件夹下面，然后通过<code>markdown</code>语法来愉快的插入图片了<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">![图片描述](文件夹的名称/带后缀的图片文件名)</span><br></pre></td></tr></table></figure>
<h4 id="小插曲"><a href="#小插曲" class="headerlink" title="小插曲"></a>小插曲</h4>凡事都不可能一帆风顺，除非你充了VIP。初次接触这个怎么可能没有遇到这个问题呢？一步三个坑，这个插曲就是一个坑…<br>经过一顿操作，hexo生成网页后，高兴的打开页面，发现<br><img src="/2020/12/09/hexo-asset-image%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF/3.png" alt="演示3"><br>小朋友心中产生了很多个问号,好奇的按下了F12查看图片链接<br><img src="/2020/12/09/hexo-asset-image%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF/4.png" alt="演示4"><br>我……..这……..，不对图片的链接不是由 <code>hexo-asset-image</code>生成的吗？<br>赶紧顺着<code>hexo-asset-image</code>的问题方向查找，果然…有bug..</li>
</ul>
<h5 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h5><p>找到<code>hexo-asset-image</code>的入口js文件<br><img src="/2020/12/09/hexo-asset-image%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF/5.png" alt="演示5"><br>把其替换如下js</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">str, m, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="built_in">String</span>(hexo.version).split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">    	<span class="keyword">var</span> link = data.permalink;</span><br><span class="line">	<span class="keyword">if</span>(version.length &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">Number</span>(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">	   <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	   <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">	<span class="comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class="line">	<span class="keyword">var</span> endPos = link.lastIndexOf(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">&#x27;excerpt&#x27;</span>, <span class="string">&#x27;more&#x27;</span>, <span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class="line">        ignoreWhitespace: <span class="literal">false</span>,</span><br><span class="line">        xmlMode: <span class="literal">false</span>,</span><br><span class="line">        lowerCaseTags: <span class="literal">false</span>,</span><br><span class="line">        decodeEntities: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>))&#123;</span><br><span class="line">			<span class="comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span></span><br><span class="line">			<span class="keyword">var</span> src = $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>).replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">			<span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;</span><br><span class="line">			   !<span class="regexp">/^\s*\//</span>.test(src)) &#123;</span><br><span class="line">			  <span class="comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class="line">			  <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">			  <span class="keyword">var</span> linkArray = link.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">var</span> srcArray = src.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">				<span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">			  &#125;);</span><br><span class="line">			  <span class="keyword">if</span>(srcArray.length &gt; <span class="number">1</span>)</span><br><span class="line">				srcArray.shift();</span><br><span class="line">			  src = srcArray.join(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">			  $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>, config.root + link + src);</span><br><span class="line">			  <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">&quot;no src attr, skipped...&quot;</span>);</span><br><span class="line">			<span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info($(<span class="built_in">this</span>));</span><br><span class="line">		&#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>然后执行hexo如下指令，就可以在本地愉快的预览到图片啦！</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">hexo cl &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure>
<p>注意:清理缓存，生成网页，启动服务</p>
<h4 id="如何插入网络图片"><a href="#如何插入网络图片" class="headerlink" title="如何插入网络图片"></a>如何插入网络图片</h4><p>插入查网络图片就比较简单了，你只需要拿到一个你想要展示的图片的链接即可，那怎么拿呢？<br><a class="link" href="https://zhuanlan.zhihu.com/p/35270383">盘点国内免费好用的图床<i class="fas fa-external-link-alt"></i></a><br>可以通过这个选一个自己喜欢的，然后通过引用就可以把图片应用到文章里面来啦！</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">这里写图片的说明</span>](<span class="link">把这里换成图床给你的链接吧</span>)</span><br></pre></td></tr></table></figure>

<h4 id="如何插入图片到markdown到文章中"><a href="#如何插入图片到markdown到文章中" class="headerlink" title="如何插入图片到markdown到文章中"></a>如何插入图片到markdown到文章中</h4><p>这种方式比较合适对小图片的处理，原因是一些现成的图片转Base64的工具对大小有限制和网页加载的时候，图片太大，可能会对网页整体的加载速度产生影响。<br>这里推荐网址，用于把图片转换成Base64的工具。<br><a class="link" href="http://tool.chinaz.com/tools/imgtobase">图片转Base64数据<i class="fas fa-external-link-alt"></i></a><br>直接上传即可:<br><img src="/2020/12/09/hexo-asset-image%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF/1.png" alt="演示1"><br>然后通过markdown的语法引入到文章中</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">这里写图片的说明</span>](<span class="link">这里就把生成的Base64的数据直接粘贴上来</span>)</span><br></pre></td></tr></table></figure>
<p>虽然这么操作是可行的，但是你直接在文章中插入一大段的Base64数据肯定很难受，所有非要用Base64的方式插入图片的同学建议如下操作：</p>
<ol>
<li>将Base64数据放在文章的最后面并且对其命名一个id名字<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">[<span class="symbol">image_id</span>]:<span class="link">data:image/png;base64,iVBOR...(省略表示)</span></span><br></pre></td></tr></table></figure></li>
<li>在文章中引用这个id来插入图片<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![<span class="string">这里写图片的说明</span>][<span class="symbol">image_id</span>]</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="演示的配置信息"><a href="#演示的配置信息" class="headerlink" title="演示的配置信息"></a>演示的配置信息</h3><p><img src="/2020/12/09/hexo-asset-image%E7%94%9F%E6%88%90%E6%9C%AC%E5%9C%B0%E5%9B%BE%E7%89%87%E9%93%BE%E6%8E%A5%E9%94%99%E8%AF%AF/6.png" alt="演示6"></p>
]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>安咕噜的入栈开篇</title>
    <url>/2020/12/08/%E5%AE%89%E5%92%95%E5%99%9C%E7%9A%84%E5%85%A5%E6%A0%88%E5%BC%80%E7%AF%87/</url>
    <content><![CDATA[<h2 id="开篇原因"><a href="#开篇原因" class="headerlink" title="开篇原因"></a>开篇原因</h2><img src="/2020/12/08/%E5%AE%89%E5%92%95%E5%99%9C%E7%9A%84%E5%85%A5%E6%A0%88%E5%BC%80%E7%AF%87/1.png" class title="This is an image">
<h2 id="如何开篇"><a href="#如何开篇" class="headerlink" title="如何开篇"></a>如何开篇</h2><p><img src="/2020/12/08/%E5%AE%89%E5%92%95%E5%99%9C%E7%9A%84%E5%85%A5%E6%A0%88%E5%BC%80%E7%AF%87/2.png" alt="这个图片"></p>
<h2 id="开篇计划"><a href="#开篇计划" class="headerlink" title="开篇计划"></a>开篇计划</h2><h2 id="开篇结果"><a href="#开篇结果" class="headerlink" title="开篇结果"></a>开篇结果</h2>]]></content>
      <categories>
        <category>Hexo</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
      </tags>
  </entry>
</search>
